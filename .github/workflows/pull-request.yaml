name: pull request ci

on: [pull_request]

env:
  NODE_VERSION_MAJOR: "23"

jobs:
  ci:
    name: ci
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - run: |
          docker build . --target=test-components -t zvoove-angular-components:test-comp
          docker build . --target=test-schematics -t zvoove-angular-components:test-schem
          docker build . --target=linter -t zvoove-angular-components:lint
        name: build ci images

      - run: docker run --rm zvoove-angular-components:lint
        name: run linter

      - run: docker run --rm zvoove-angular-components:test-comp
        name: test components

      - run: docker run --rm zvoove-angular-components:test-schem
        name: test schematics
